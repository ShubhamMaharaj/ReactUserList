{"ast":null,"code":"import React,{Fragment,useState,useEffect}from'react';import{Button,Table}from'react-bootstrap';import\"bootstrap/dist/css/bootstrap.min.css\";import{Link,useNavigate}from'react-router-dom';import Spinner from'react-bootstrap/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){let Navigation=useNavigate();const[data,setData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const fetchData=async()=>{try{const response=await fetch('https://my-app-db-33c96-default-rtdb.firebaseio.com/my_app.json');if(!response.ok){throw new Error('Failed to fetch data');}const fetchedData=await response.json();setData(fetchedData);}catch(error){setError(error.message);}finally{setLoading(false);}};useEffect(()=>{fetchData();},[]);const deleteData=async key=>{try{setLoading(true);const response=await fetch(\"https://my-app-db-33c96-default-rtdb.firebaseio.com/my_app/\".concat(key,\".json\"),{method:'DELETE',headers:{'Content-Type':'application/json'}});if(response.ok){console.log(\"Data with key \".concat(key,\" deleted successfully.\"));// Refetch data after successful deletion\nfetchData();}else{throw new Error('Failed to delete data.');}}catch(error){console.error('Error:',error.message);}Navigation('/');};if(loading){return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",style:{margin:'10rem'},children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}// const HandleDelete = (id) => {\n//     let index = Object.keys(data).findIndex((e) => e.id === id);\n//     Object.keys(data).splice(index ,1);\n//     console.log(ls);\n//      Navigation('/');\n// }\nreturn/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{marginTop:\"10rem\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User List\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Sr. No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data&&Object.keys(data).length>0?Object.keys(data).map((key,index)=>{const item=data[key];return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[index+1,\".\"]}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.age}),/*#__PURE__*/_jsx(\"td\",{children:item.email}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(Link,{to:'/edit',state:{data:{datakey:key,name:item.name,age:item.age,id:item.id,email:item.email}},children:/*#__PURE__*/_jsx(Button,{className:\"btn-success\",children:\"Edit\"})}),\" \\xA0\",/*#__PURE__*/_jsx(Button,{className:\"btn-danger\",onClick:()=>deleteData(key),children:\"Delete\"})]})]},item.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:5,style:{color:'red'},children:\"No data Available... \"})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:'/add',children:/*#__PURE__*/_jsx(Button,{size:\"lg\",children:\"Create\"})})]})});}export default Home;","map":{"version":3,"names":["React","Fragment","useState","useEffect","Button","Table","Link","useNavigate","Spinner","jsx","_jsx","jsxs","_jsxs","Home","Navigation","data","setData","loading","setLoading","error","setError","fetchData","response","fetch","ok","Error","fetchedData","json","message","deleteData","key","concat","method","headers","console","log","animation","role","style","margin","children","className","marginTop","striped","bordered","hover","size","Object","keys","length","map","index","item","name","age","email","to","state","datakey","id","onClick","colSpan","color"],"sources":["/Users/shubhammaharaj/Projects/first react app/my-app/src/components/home.jsx"],"sourcesContent":["import React , { Fragment ,useState,useEffect } from 'react';\nimport {Button , Table} from 'react-bootstrap';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport {Link,useNavigate} from 'react-router-dom';\nimport Spinner from 'react-bootstrap/Spinner'\n\nfunction Home(){\n\n    let Navigation = useNavigate();\n\n    \n    const [data, setData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const fetchData = async () => {\n        try {\n            const response = await fetch('https://my-app-db-33c96-default-rtdb.firebaseio.com/my_app.json');\n            if (!response.ok) {\n                throw new Error('Failed to fetch data');\n            }\n            const fetchedData = await response.json();\n            setData(fetchedData);\n        } catch (error) {\n            setError(error.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        \n        fetchData();\n    }, []);\n    \n    const deleteData = async (key) => {\n        try {\n            setLoading(true);\n            const response = await fetch(`https://my-app-db-33c96-default-rtdb.firebaseio.com/my_app/${key}.json`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n            });\n    \n            if (response.ok) {\n                console.log(`Data with key ${key} deleted successfully.`);\n                \n                // Refetch data after successful deletion\n                fetchData();\n            } else {\n                throw new Error('Failed to delete data.');\n            }\n        } catch (error) {\n            console.error('Error:', error.message);\n        }\n        Navigation('/');\n    };\n    \n    \n\n    if (loading) {\n        return (\n            <Spinner animation=\"border\" role=\"status\" style={{margin:'10rem'}}>\n              <span className=\"visually-hidden\">Loading...</span>\n            </Spinner>\n          );\n    }\n\n    if (error) {\n        return <div>Error: {error}</div>;\n    }\n    \n\n    // const HandleDelete = (id) => {\n\n\n       \n    //     let index = Object.keys(data).findIndex((e) => e.id === id);\n       \n    //     Object.keys(data).splice(index ,1);\n    //     console.log(ls);\n    //      Navigation('/');\n    // }\n\n   \n    \n   \n   \n    \n   \n\n    return(\n        <Fragment>\n\n           \n        \n            <div className=\"container\" style={{marginTop:\"10rem\"}}>\n            <h1>User List</h1>\n\n                <Table striped bordered hover size=\"sm\" >\n                    <thead>\n                       <tr>\n                       <th>Sr. No</th>\n                        <th>Name</th>\n                        <th>Age</th>\n                        <th>Email</th>\n                        \n                        <th>Action</th>\n                       </tr>\n                   </thead>\n                   <tbody>\n                    {\n                        data && Object.keys(data).length >0 ? Object.keys(data).map((key,index) => {\n                            const item = data[key];\n                           \n                            return(\n                                <tr key={item.id}>\n                                    <td>{index+1}.</td>\n                                    <td>{item.name}</td>\n                                    <td>{item.age}</td>\n                                    <td>{item.email}</td>\n                                   \n                                    <td> <Link to={'/edit'} state={{ data: {datakey:key,name:item.name,age:item.age,id:item.id,email:item.email}}}><Button className=\"btn-success\">Edit</Button></Link> &nbsp;\n                                    <Button className=\"btn-danger\" onClick={()=>deleteData(key)}>Delete</Button></td>\n                                </tr>\n                                \n                            )\n\n                        }) : <tr><td colSpan={5} style={{color:'red'}}>No data Available... </td></tr>\n                    }\n                   \n                   </tbody>\n\n\n                </Table>\n                <br></br>\n                <br></br>\n                <Link  to={'/add'}><Button size='lg'>Create</Button></Link>\n\n\n\n            </div>\n            </Fragment>\n       \n\n    )\n\n\n\n}\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}